Icon="cubes"
Author="dcflachs"
Title="Compose"
Type="xmenu"
Menu="Utilities"
---
<?php 
require_once("/usr/local/emhttp/plugins/compose.manager/php/defines.php");
$cfg = parse_plugin_cfg($sName);
$menu_cfg = file_get_contents($plugin_root . 'Compose.page');
?>

<form markdown="1" name="compose_manager_settings" method="POST" action="/update.php" target="progressFrame">
<input type="hidden" name="#file" value="<?=$sName?>/<?=$sName?>.cfg">

_(Compose Command Progress Display)_:
: <select name="OUTPUTSTYLE">
  <?=mk_option($cfg['OUTPUTSTYLE'], "basic", _("Basic"))?>
  <?=mk_option($cfg['OUTPUTSTYLE'], "ttyd", _("Terminal"))?>
  </select>

_(Compose Location)_:
: <select name="LOCATION">
  <?=mk_option($cfg['LOCATION'], "docker", _("Docker Page"))?>
  <?=mk_option($cfg['LOCATION'], "header", _("Header menu"))?>
  </select>

<?php if( $cfg['LOCATION'] == "docker" ) {
$menu_cfg = preg_replace('/Menu=.*/ui', 'Menu="Docker:2"', $menu_cfg);
file_put_contents($plugin_root . 'Compose.page', $menu_cfg);
} else {
$menu_cfg = preg_replace('/Menu=.*/ui', 'Menu="Tasks:61"', $menu_cfg);
file_put_contents($plugin_root . 'Compose.page', $menu_cfg);
} ?>

<input type="submit" name="#default" value="_(Default)_">
: <input type="submit" name="#apply" value="_(Apply)_" onSubmit="window.location.reload()" disabled><input type="button" value="_(Done)_" onclick="done()">
</form>
